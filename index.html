<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Valentine Card for Yusra</title>
    <style>
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        #main-message {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            text-shadow: 0 0 20px #ff3366, 0 0 40px #ff6699;
            pointer-events: none;
            z-index: 10;
            font-size: 2.5rem;
            font-weight: bold;
            animation: glow 2s ease-in-out infinite;
        }
        @keyframes glow {
            0% { text-shadow: 0 0 10px #ff3366, 0 0 20px #ff3366; }
            50% { text-shadow: 0 0 20px #ff6699, 0 0 40px #ff3366; }
            100% { text-shadow: 0 0 10px #ff3366, 0 0 20px #ff3366; }
        }
        #letter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 600px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px 25px;
            color: white;
            font-size: 1.1rem;
            line-height: 1.6;
            text-shadow: 0 2px 5px black;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            pointer-events: none; /* allows clicks to pass through to the canvas */
            z-index: 20;
            font-family: 'Georgia', serif;
            border-left: 5px solid #ff6699;
        }
        #letter p {
            margin: 0 0 15px 0;
        }
        #letter .signature {
            font-style: italic;
            text-align: right;
            font-size: 1.3rem;
            color: #ffb6c1;
            margin-top: 10px;
        }
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
            z-index: 15;
            pointer-events: none;
        }
        @media (max-width: 600px) {
            #main-message { font-size: 1.8rem; top: 10px; }
            #letter { font-size: 0.9rem; padding: 15px; width: 90%; bottom: 15px; }
        }
    </style>
</head>
<body>
    <div id="main-message">‚ù§Ô∏è Happy Valentines Day my Love, Yusra üíóüéÄ</div>
    
    <div id="letter">
        <p>On this special day, I want to take a moment to express just how much you mean to me. Every day with you feels like a beautiful adventure, and I cherish every moment we share.</p>
        <p>Your smile lights up my world, and your laughter is music to my ears. I love the way you make even the simplest moments feel extraordinary. You inspire me to be a better person, and I am so grateful for your love and support.</p>
        <p>As we celebrate this day of love, I want you to know that my heart is yours, now and always. Thank you for being my partner, my confidant, and my greatest joy. I look forward to creating many more beautiful memories together.</p>
        <div class="signature">With all my love,<br>Your sweetheart Abhinav üíóüéÄ</div>
    </div>

    <div class="instructions">Drag to rotate ‚Ä¢ Scroll to zoom</div>

    <!-- Import Three.js core and add-ons -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.128.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.128.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { CSS2DRenderer, CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';

        // --- Setup scene, camera, renderers ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0a0a20);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(5, 3, 8);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        // CSS2 renderer (still used for floating hearts, but main text is HTML overlay)
        const labelRenderer = new CSS2DRenderer();
        labelRenderer.setSize(window.innerWidth, window.innerHeight);
        labelRenderer.domElement.style.position = 'absolute';
        labelRenderer.domElement.style.top = '0px';
        labelRenderer.domElement.style.left = '0px';
        labelRenderer.domElement.style.pointerEvents = 'none';
        document.body.appendChild(labelRenderer.domElement);

        // Controls
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 1.5;
        controls.enableZoom = true;
        controls.maxPolarAngle = Math.PI / 2;

        // --- Lighting ---
        const ambientLight = new THREE.AmbientLight(0x404060);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xffccaa, 1);
        dirLight.position.set(2, 5, 3);
        scene.add(dirLight);

        const backLight = new THREE.PointLight(0x4466ff, 0.5);
        backLight.position.set(-3, 1, -5);
        scene.add(backLight);

        const fillLight = new THREE.PointLight(0xff88aa, 0.4);
        fillLight.position.set(0, -2, 2);
        scene.add(fillLight);

        const heartLight = new THREE.PointLight(0xff3366, 1, 8);
        heartLight.position.set(0, 1, 2);
        scene.add(heartLight);

        // --- Create the 3D Heart ---
        const heartGroup = new THREE.Group();

        const material = new THREE.MeshStandardMaterial({
            color: 0xff3366,
            emissive: 0x330000,
            roughness: 0.3,
            metalness: 0.1,
            emissiveIntensity: 0.5
        });

        // Left lobe
        const sphere1 = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), material);
        sphere1.position.set(-1.1, 0.5, 0);
        sphere1.scale.set(1, 0.9, 0.8);
        heartGroup.add(sphere1);

        // Right lobe
        const sphere2 = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), material);
        sphere2.position.set(1.1, 0.5, 0);
        sphere2.scale.set(1, 0.9, 0.8);
        heartGroup.add(sphere2);

        // Bottom tip
        const tipGeo = new THREE.ConeGeometry(0.9, 1.6, 32);
        const tipMat = new THREE.MeshStandardMaterial({ color: 0xff3366, emissive: 0x220000, roughness: 0.3 });
        const tip = new THREE.Mesh(tipGeo, tipMat);
        tip.position.set(0, -0.6, 0);
        tip.scale.set(0.9, 0.8, 0.7);
        heartGroup.add(tip);

        // Bottom sphere for smoothness
        const bottomSphere = new THREE.Mesh(new THREE.SphereGeometry(0.5, 16), material);
        bottomSphere.position.set(0, -1.2, 0.2);
        bottomSphere.scale.set(0.7, 0.4, 0.5);
        heartGroup.add(bottomSphere);

        scene.add(heartGroup);

        // Subtle wireframe outline
        const wireframeMaterial = new THREE.MeshBasicMaterial({ color: 0xff88aa, wireframe: true, transparent: true, opacity: 0.15 });
        const wfSphere1 = new THREE.Mesh(new THREE.SphereGeometry(1.02, 16, 16), wireframeMaterial);
        wfSphere1.position.copy(sphere1.position);
        wfSphere1.scale.copy(sphere1.scale);
        scene.add(wfSphere1);
        const wfSphere2 = new THREE.Mesh(new THREE.SphereGeometry(1.02, 16, 16), wireframeMaterial);
        wfSphere2.position.copy(sphere2.position);
        wfSphere2.scale.copy(sphere2.scale);
        scene.add(wfSphere2);

        // --- Floating particles ---
        const particleCount = 300;
        const particlesGeo = new THREE.BufferGeometry();
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);
        const color = new THREE.Color();

        for (let i = 0; i < particleCount; i++) {
            const radius = 3 + Math.random() * 4;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);

            positions[i*3] = radius * Math.sin(phi) * Math.cos(theta);
            positions[i*3+1] = radius * Math.sin(phi) * Math.sin(theta);
            positions[i*3+2] = radius * Math.cos(phi);

            const hue = 0.95 + Math.random() * 0.1;
            color.setHSL(hue, 0.8, 0.6 + Math.random() * 0.4);
            colors[i*3] = color.r;
            colors[i*3+1] = color.g;
            colors[i*3+2] = color.b;
        }

        particlesGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        particlesGeo.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const particleMaterial = new THREE.PointsMaterial({
            size: 0.15,
            vertexColors: true,
            transparent: true,
            blending: THREE.AdditiveBlending,
            depthWrite: false
        });

        const particles = new THREE.Points(particlesGeo, particleMaterial);
        scene.add(particles);

        function animateParticles() {
            particles.rotation.y += 0.0002;
            particles.rotation.x += 0.0001;
        }

        // --- Floating hearts (CSS2D) as decorative elements ---
        for (let i = 0; i < 5; i++) {
            const heartDiv = document.createElement('div');
            heartDiv.textContent = '‚ù§Ô∏è';
            heartDiv.style.fontSize = (30 + Math.random()*20) + 'px';
            heartDiv.style.position = 'absolute';
            heartDiv.style.opacity = 0.6;
            heartDiv.style.filter = 'drop-shadow(0 0 5px red)';
            
            const heartObj = new CSS2DObject(heartDiv);
            const angle = (i / 5) * Math.PI * 2;
            heartObj.position.set(Math.cos(angle)*2.5, Math.sin(angle)*1.5 + 1, 0);
            scene.add(heartObj);
        }

        // --- Ground reflection ---
        const planeGeo = new THREE.CircleGeometry(10, 32);
        const planeMat = new THREE.MeshStandardMaterial({
            color: 0x1a1a2e,
            emissive: 0x110022,
            transparent: true,
            opacity: 0.4,
            side: THREE.DoubleSide
        });
        const plane = new THREE.Mesh(planeGeo, planeMat);
        plane.rotation.x = -Math.PI / 2;
        plane.position.y = -1.8;
        scene.add(plane);

        // --- Stars background ---
        const starsGeo = new THREE.BufferGeometry();
        const starsPos = new Float32Array(600 * 3);
        for (let i = 0; i < 600; i++) {
            starsPos[i*3] = (Math.random() - 0.5) * 50;
            starsPos[i*3+1] = (Math.random() - 0.5) * 30;
            starsPos[i*3+2] = (Math.random() - 0.5) * 50 - 20;
        }
        starsGeo.setAttribute('position', new THREE.BufferAttribute(starsPos, 3));
        const starsMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
        const stars = new THREE.Points(starsGeo, starsMat);
        scene.add(stars);

        // --- Animation loop ---
        function animate() {
            requestAnimationFrame(animate);

            const time = Date.now() * 0.002;
            heartGroup.scale.setScalar(1 + Math.sin(time) * 0.02);

            animateParticles();

            controls.update();

            renderer.render(scene, camera);
            labelRenderer.render(scene, camera);
        }

        animate();

        // --- Handle window resize ---
        window.addEventListener('resize', onWindowResize, false);
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            labelRenderer.setSize(window.innerWidth, window.innerHeight);
        }
    </script>
</body>
</html>
